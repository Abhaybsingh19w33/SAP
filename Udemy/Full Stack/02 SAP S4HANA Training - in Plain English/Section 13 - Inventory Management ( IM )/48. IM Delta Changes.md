# IM Delta Changes

## Introduction
In this section, we will talk about the changes in inventory management within SAP S/4HANA. At the core of inventory management is the material document, which is created for every material change, such as a change in value, location, sending out of the warehouse, or receiving into the warehouse.

## Material Documents
Every material change creates a material document, similar to how every invoice creates an accounting document. Examples of transactions that create material documents include:
- Sales document delivery (PGI)
- Post goods receipt (PGR)
- Goods receipt for purchase orders
- Pure IM transactions (e.g., initial stock entry)

### Storage of Material Documents in SAP ECC
- **Header Data**: Stored in the `MKPF` table
- **Item Data**: Stored in the `MSEG` table

### Storage of Material Documents in SAP S/4HANA
- **Consolidation**: All data is collapsed into a single table called `MATDOC`
- **Additional Data**: `MATDOC` stores not just material document data but also an aggregate of various other fields

## Changes in SAP S/4HANA

### Consolidation of Tables
The `MATDOC` table replaces several other tables that were used in SAP ECC to store different types of stock information. Examples include:
- **Stock by Plant**: Previously stored in the `MARD` table
- **Stock by Storage Location**: Previously stored in the `MSLB` table
- **Consignment Stock**: Previously stored in the `MSLB` table

### Elimination of Aggregate Tables
With the power of the HANA database, the need for pre-calculated accumulations and index tables is eliminated. The HANA database allows for on-the-fly processing, making these tables obsolete. Although these tables still exist for compatibility reasons with legacy code, data is not written into them at runtime. Instead, data is dynamically generated from the `MATDOC` table using proxy objects.

## Detailed Explanation

### Example: Stock by Plant
- **SAP ECC**: Stored in the `MARD` table
- **SAP S/4HANA**: Data is dynamically aggregated from the `MATDOC` table

### Example: Stock by Storage Location
- **SAP ECC**: Stored in the `MSLB` table
- **SAP S/4HANA**: Data is dynamically aggregated from the `MATDOC` table

### Proxy Objects
Proxy objects are used to dynamically generate data from the `MATDOC` table for legacy tables. For example:
- **MARD**: Proxy object `MARD_PROXY`
- **MKPF**: Proxy object `MKPF_PROXY`

## Conclusion
The key change in inventory management in SAP S/4HANA is the consolidation of multiple aggregate tables into the `MATDOC` table. This change leverages the capabilities of the HANA database to perform real-time aggregations, eliminating the need for pre-calculated accumulations and index tables. This fundamental change simplifies inventory management and enhances system performance.

### Summary
- **Material Documents**: Consolidated into the `MATDOC` table
- **Elimination of Aggregate Tables**: Real-time aggregations using the HANA database
- **Proxy Objects**: Used for compatibility with legacy code




The provided text discusses the changes in inventory management within SAP S/4HANA. At the core of inventory management is the material document, which is created for every material change, such as a change in value, location, sending out of the warehouse, or receiving into the warehouse. Examples of transactions that create material documents include sales document delivery, post goods issue (PGI), post goods receipt (PGR), and goods receipt for purchase orders. Even pure inventory management (IM) transactions, like initial stock entry, generate material documents.

In SAP ECC, material documents are stored as header data in the MKPF table and item data in the MSEG table. However, in SAP S/4HANA, this data is collapsed into a single table called MATDOC. This new table stores not only the material document data but also an aggregate of various other fields. For example, stock by plant, which was previously stored in the MARD table, and stock by storage location, stored in the MSLB table, are now part of the MATDOC table. This consolidation eliminates the need for multiple tables and allows for on-the-fly aggregation using the power of the HANA database.

The text explains that the MATDOC table replaces several other tables that were used in SAP ECC to store different types of stock information. These tables, such as MARD, MSLB, and others, are no longer necessary because the HANA database can perform real-time aggregations. Although these tables still exist for compatibility reasons with legacy code, data is not written into them at runtime. Instead, data is dynamically generated from the MATDOC table using proxy objects.

The text also highlights the importance of understanding the removal of aggregate tables in SAP S/4HANA. This change has far-reaching implications, including improved performance and simplified data management. The MATDOC table becomes the central repository for material-related transactional data, allowing for efficient data retrieval and reporting.

In summary, the key change in inventory management in SAP S/4HANA is the consolidation of multiple aggregate tables into the MATDOC table. This change leverages the capabilities of the HANA database to perform real-time aggregations, eliminating the need for pre-calculated accumulations and index tables. This fundamental change simplifies inventory management and enhances system performance.



In this section.

We will talk about the changes in inventory management.

So are the core of inventory management is the material document like every invoice creates an accounting

document, right?

Similarly, every material change, be it a change in value, be it a change in location.

Be it sending out of our warehouse, be it receiving into the warehouse.

All these transactions create a document, for example, sales document delivery document.

There is a sales order.

It has been delivered and you have done a PGI that creates a material document.

The customer didn't like that order.

He has returned it.

You have done a PGR post receipt that creates a material document.

A purchase order has been created and the vendor has sent us.

The goods in the truck.

We have done the goods receipt, which means you have done a receipt of goods.

That creates a material document.

Even pure Im transactions.

Right?

Anything that you do in my go.

Like.

Initial stock entry.

561.

46016 31.

Most of these material types generate a material document.

So a material document, right, is stored as header data and item data, just like a sales order or

an invoice.

It has a header and item data.

The header data is stored in the table.

Macpf.

The item data is stored in the table.

M seq Header Data item data.

The change in s four Hana is that.

All of this data is collapsed.

Into one table called Matt Doc Material document.

Now, it's not just this data.

This is part of the data.

So Matt, dark stores, not just this data, but an aggregate of so many different fields.

What kind of fields?

So we know that the material document data.

Header is stored in the material.

Doc math doc table.

Just one table that stores both the header and line item data.

So this is gone now.

And it gets stored here.

This is one change.

And like I said, not just this piece of data matte dark stores, data.

Other than the material document data as well.

Examples.

If you take a material M0 one.

And take the Chicago plant.

How much stock is there?

In the Chicago plant.

Where is that stored?

That is stored in the table.

Ma, See?

So Marcy Table is a separate table in EQ that stores stock by plan.

If you want to look at the stock by storage location.

Right.

The same thing.

How much?

Stock?

By storage location.

That is stored in another table.

Mar de.

Say you have done a consignment to the customer.

How much consignment stock, which is basically special stock.

That is stored in MySQL.

So like this, there are close to 30 odd tables.

What are these kind of tables?

Aren't these kind of aggregation tables or index tables, whatever you used to call them.

But these are tables that are not necessary in the new Esfahani world because.

Right from the material document.

You can aggregate.

How much stock is there?

By plant because of the power of Hana and the speed of Hana.

This aggregation can be done on the fly.

This is the same theme that we have been seeing right from the beginning.

Removal of aggregates or index tables.

Now all these tables.

Are no longer necessary.

And that information is available here in the Mac doc.

Table.

By now, probably you must trust me, Right.

We have been seeing this thing for quite some time.

So if you go to the table, say Mara, right.

Or Mark.

Which is the stock by plant.

The table is still there.

Can you go?

Here, Look at the data.

There are entries there.

What does that mean?

Don't be alarmed, Remember?

For compatibility reasons with legacy code.

Data might exist there in that table.

That doesn't mean data is written into that table at runtime.

That's the change.

Data is not written into the table by runtime.

This is the key change that you understand with s four Hana.

If you don't understand output determination, if you don't understand credit management, if you don't

understand settlement management, if you don't understand business partner, that's all fine.

No worries in s four, Hana.

All you have to understand is removal of aggregates and why they have been removed.

What is the advantage of removing aggregate tables?

The implications are far reaching.

The implications reached down to VW.

Implications Reach down to consolidation.

The implications are far reaching.

We'll talk about that again in another concept.

But every time you see those tables in this and SAP says that those tables are no longer relevant and

you still see data in them.

The only reason is because legacy code reads this data and legacy reports still read off of these tables.

And how does he manage to put data in these tables?

Remember, kids views go to extras.

Proxy object.

And what's the proxy view for Mark?

Underscore.

Underscore.

Mark.

Control C.

And how do you view the definition of this proxy object?

Go to C 38.

And are you?

D.

SHOW2.

Is this the same table?

I tend to forget this sometimes.

This is an important program for you.

And now paste the.

Source there.

And there you go.

You don't have to bother about all of this except that select from mercy, blah, blah, blah.

So you don't have to really worry about what the script does.

It's recreating that data.

So that existing reports don't break.

Now it's the same thing with that other table.

S 11.

And if you look at the macpf.

Which is the header data for material document.

Click on display.

Go to extras Proxy object.

And.

This is the proxy object.

Close that and you know where to view.

The definition of this table, right?

Oh 38.

Go to the blah, blah, blah.

Program.

Put your proxy object in there.

And click execute again.

You got a bunch of code.

What does it do?

It selects the data fields from which table?

From Matt Dark.

Rate.

This table actually does not exist in the new Esfahani world.

It's recreated from scratch from the mad dog table like a view every time you want to see it.

Okay, it pulls up some data from Mad Dog and shows it to you as just the header data.

If you go to MSG, the line item data, the line item fields are pulled again from the same table.

Mad Dog.

For the foreseeable future.

The table, Matt Doc is probably going to be the most important material related table.

Not the master data, but transactionally.

So what's the key change in inventory management?

One of the key changes is so many.

Different aggregate tables associated with stock or material are accumulated into this one table called.

So Mad Dog is essentially.

Right, Right, right, right, right.

No read.

Every time a transaction happens, go right to that table.

Just one table.

Just one table.

You don't need to write to 30 different tables.

Just write to Matt, Doc.

And any time anybody wants to pull a report out of Doc, like how much stock is there for a particular

plant, how much is stock is there in the raw material of Chicago plant?

How much of stock is there with the customer as consignment?

All these questions can be answered on the fly without aggregate tables straight from doc.

This is probably the most fundamental change in inventory management.

There is another change with respect to the material ledger.

We're going to talk about that in the next chapter.