# ATP Delta Changes

## Introduction
The provided text discusses the changes in the Available to Promise (ATP) functionality within SAP S/4HANA. ATP is a process used to check the availability of materials when a sales order is created. It involves verifying if the required quantity of a material is available in stock. Alongside the ATP check, there is another component called Transfer of Requirements (TOR), which works in tandem with ATP. When a sales order is created, an ATP check is performed against the stock, and the requirements are transferred to Material Requirements Planning (MRP).

## ATP in SAP ECC
In SAP ECC, the ATP process involves checking the availability of materials and transferring requirements to MRP, which can be viewed in transaction MD04. This process remains unchanged in SAP S/4HANA. The main control for availability checks is found in the material master, specifically in the MRP 3 view, where the availability check field is located. This field determines the type of availability check, such as individual requirements, collective requirements, or daily requirements.

### Types of Availability Checks
- **Individual Requirements**: Each sales order creates a separate record in MRP, suitable for configurable products like laptops.
- **Collective Requirements**: Combines multiple orders into a single record, practical for non-configurable products like keyboards.
- **Daily Requirements**: Aggregates requirements on a daily basis.

## Changes in SAP S/4HANA

### Handling of Collective Requirements
In SAP S/4HANA, the handling of collective requirements has changed. Previously, in SAP ECC, collective requirements were stored in a table called VBS, while individual requirements were stored in a table called VB. However, with the power of the HANA database, the need for pre-calculated accumulations and index tables is eliminated. The HANA database allows for on-the-fly processing, making the VBS table obsolete. As a result, collective requirements are no longer stored separately; instead, they are dynamically aggregated when needed.

### Migration Steps
During the migration from SAP ECC to SAP S/4HANA, it is essential to update the availability check configuration. Any entries that specify collective requirements (denoted by 'B') need to be changed to individual requirements (denoted by 'A'). This ensures that the system no longer relies on the VBS table for collective requirements. The migration step involves going to the availability check configuration and removing any settings that use collective requirements.

## Detailed Explanation

### ATP Check and Transfer of Requirements (TOR)
- **ATP Check**: Verifies if the required quantity of a material is available in stock when a sales order is created.
- **Transfer of Requirements (TOR)**: Transfers the requirements to MRP, which can be viewed in transaction MD04.

### Availability Check Field in Material Master
- **Location**: MRP 3 view in the material master.
- **Configuration**: Controlled using transaction OVZ2 or through SPRO under Sales and Distribution > Basic Functions > Availability Check.

### Example Scenarios
- **Individual Requirements**: Suitable for configurable products like laptops, where each sales order creates a separate record in MRP.
- **Collective Requirements**: Suitable for non-configurable products like keyboards, where multiple orders are combined into a single record.

### Changes in Handling Collective Requirements
- **SAP ECC**: Collective requirements stored in table VBS.
- **SAP S/4HANA**: Collective requirements dynamically aggregated on-the-fly, eliminating the need for table VBS.

### Migration Steps
1. **Update Availability Check Configuration**: Change entries that specify collective requirements (denoted by 'B') to individual requirements (denoted by 'A').
2. **Remove Settings for Collective Requirements**: Ensure that the system no longer relies on the VBS table for collective requirements.

## Conclusion
While the ATP process and TOR remain functionally the same in SAP S/4HANA, the underlying mechanism for handling collective requirements has changed. The HANA database's ability to perform real-time aggregations eliminates the need for separate storage of collective requirements, simplifying the process and improving efficiency.

### Summary
- **ATP Check**: Verifies material availability.
- **TOR**: Transfers requirements to MRP.
- **Availability Check Field**: Controls the type of requirements (individual or collective).
- **Migration**: Update configuration to remove collective requirements.




The provided text discusses the changes in the Available to Promise (ATP) functionality within SAP S/4HANA. ATP is a process used to check the availability of materials when a sales order is created. It involves verifying if the required quantity of a material is available in stock. Alongside the ATP check, there is another component called Transfer of Requirements (TOR), which works in tandem with ATP. When a sales order is created, an ATP check is performed against the stock, and the requirements are transferred to Material Requirements Planning (MRP).

In SAP ECC, the ATP process involves checking the availability of materials and transferring requirements to MRP, which can be viewed in transaction MD04. This process remains unchanged in SAP S/4HANA. The main control for availability checks is found in the material master, specifically in the MRP 3 view, where the availability check field is located. This field determines the type of availability check, such as individual requirements, collective requirements, or daily requirements.

Individual requirements mean that each sales order creates a separate record in MRP, which is suitable for configurable products like laptops. Collective requirements, on the other hand, combine multiple orders into a single record, which is practical for non-configurable products like keyboards. This configuration is controlled using the availability check field in the material master and can be set up in transaction OVZ2.

In SAP S/4HANA, the handling of collective requirements has changed. Previously, in SAP ECC, collective requirements were stored in a table called VBS, while individual requirements were stored in a table called VB. However, with the power of the HANA database, the need for pre-calculated accumulations and index tables is eliminated. The HANA database allows for on-the-fly processing, making the VBS table obsolete. As a result, collective requirements are no longer stored separately; instead, they are dynamically aggregated when needed.

During the migration from SAP ECC to SAP S/4HANA, it is essential to update the availability check configuration. Any entries that specify collective requirements (denoted by 'B') need to be changed to individual requirements (denoted by 'A'). This ensures that the system no longer relies on the VBS table for collective requirements. The migration step involves going to the availability check configuration and removing any settings that use collective requirements.

In summary, while the ATP process and TOR remain functionally the same in SAP S/4HANA, the underlying mechanism for handling collective requirements has changed. The HANA database's ability to perform real-time aggregations eliminates the need for separate storage of collective requirements, simplifying the process and improving efficiency.



In this section, we will talk about the changes in ATP.

You know, what is ATP, right.

Available to promise.

So every time a sales order is created.

An ATP check is done.

Which is basically saying, Hey, I need 100 quantity of a particular material.

Do we have it?

That's called an ATP check.

Apart from doing a check.

There is also another component here.

That is called transfer of requirements.

T o r.

These two things go hand in hand.

So what is happening behind the scenes?

There is a sales order.

As soon as the sales order is created for all physical deliverable materials.

An ATP check is done.

Against the stock and requirements.

A transferred to MRP.

So requirements are transferred to MRP and ATP check is done against the stock.

So when requirements are transferred to MRP.

You can see the list of requirements in MD zero four.

So this customer required 100 quantity of such material.

The next customer required so much quantity of a different material.

And it's not just sales orders.

Requirements can come in from a stock transfer order, for example.

Requirements can automatically be generated by we can run the process for a particular material.

And say that there is a shortfall and then generate requirements additionally that can be fulfilled

with purchase requisitions or production orders in case we are manufacturing them.

Now, Has this process changed?

No, functionally.

There is no change in this process.

It's the same.

And what is the main control on the material master that controls availability?

Check.

So if you go to M03.

If you go to M03.

This is SEC, by the way.

So go to M01.

Go to the three view so you can select a plant, say 1200 and whatever storage location.

Sales.

Org 1000 Distribution channel ten.

There is a field in MRP three view called availability check.

If you go there.

This field is named availability check.

You'll see that there are different kinds of availability check.

Individual requirements, collective requirements.

Daily requirements.

So you got to understand what that means apart from checking availability.

The same piece of configuration controls your transfer requirements as well.

How are requirements transferred?

We have seen two examples, right?

Individual requirements, collective requirements or daily requirements.

What this means is, say, for example, if there are 100 orders.

Each with one quantity, let's say.

Right.

Of laptops or whatever.

A day.

If the requirement says.

Individual.

Then hundred records will be created in md0 for.

That means each requirement.

Is transferred to.

By itself.

They are not combined.

This makes sense for laptops, right?

Laptops are typically configured, so each laptop is different.

So there is one.

Each laptop requirement is different.

But for a for a company, say selling milk or any consumable.

Where each order is not different from the order, meaning the product is the same.

Say keyboard keyboards are all the same, right?

For a particular type of keyboard, it's all same.

So if there are 100 orders of keyboard, you can transfer these requirements individually, meaning

create 100 records.

Or.

Do a daily.

Our collective requirements, which means all these 100 orders will be collapsed.

Into one requirement or one record.

So 100 orders each with one keyboard, let's say.

And this will create a quantity of 100, because all those orders will get accumulated in terms of order

quantity, and only one record will be created.

So as the orders comes in, the cumulation happens automatically.

I think you can understand why this needs to be done right?

There are materials where individual requirements make sense.

And there are materials where collective requirements make sense.

This is controlled using that availability check field.

This guy.

And where is this configured?

This is configured in availability check.

If you go to transaction.

0VZ2.

You can take this transaction or you can go to SPR or under sales and distribution, basic functions.

Availability check.

So these are the availability check types.

And over here you can see that the total sales in case of daily requirements.

Is transferred as a single record.

Right as total sales per day.

So this is daily.

Sorry.

So the total sales are accumulated because it's b b means the total records are accumulated per day.

And when you take individual requirements, A means that it's a single record that's transferred as

a requirement to MRP.

So these are the options that are available.

If you go to Hana.

In the same transaction over two.

Over here.

B is not an option.

It's always individual requirements.

Now, why?

Why this change?

It makes sense that requirements are collected because you don't want to transfer one requirement at

a time.

It makes sense that the planner plans all the cumulative requirements for the day for certain kinds

of materials like milk, keyboard or any consumable that's not configured.

Again, to understand this, come back to the power of Hana.

Requirements.

Accumulated for the simple reason that it's practical and convenient to have a cumulative view of all

the requirements for that day.

Make sense for planning, right?

You don't want to plan 100 keyboards individually.

You would want to rather plan all the 100 keyboards in one batch of manufacturing or procurement.

Isn't it?

The reason why that accumulation happens is clear.

And that accumulation still happens.

In Hana, except that it happens on the fly.

There is no reason why you have to pre accumulate it.

Because you can do it on the fly.

These requirements are stored behind the scenes using a table called VB.

Right.

If you go to this table, it has a list of requirements.

So biomaterial and these are individual requirements.

And there is another table.

An aggregate table kind of.

That stores collective requirements.

Now think of Hannah.

Is there a need for this table?

The only reason why this table exists is because.

It's accumulating.

And you remember with Hana, there is no need for pre-calculated accumulations or pre-calculated aggregations

or predefined indices.

Right.

So this table is gone.

So this table is removed.

In Hana.

And how do you get that information, though?

You know, you still need that information, information about all the requirements for that day, for

all orders of keyboard of a particular type.

That can be had from this by accumulating all the orders that were created on a particular date.

Right.

And that will give you the same essential data as WBS table is storing.

This is the key change.

You can very well go to C 16.

Savvy.

Then just choose a material, say M0 one.

Or just leave it blank and.

Doing the transaction.

So you see, these are all the individual requirements, sales order, line item.

And then.

It's a particular schedule line, and this is the material for which the requirements have been created

in this plant, and it needs to be available for this date.

Right.

Now, if you go to the other table that accumulates requirements VBS C it doesn't have a sales order

information because it's accumulating data across sales orders.

So if you go to zero and then click execute.

So if you look at M0 one M0 one might not have any data.

That's right, because it's not planned on a cumulative basis.

But there are other materials that could be planned on a cumulative basis.

If you take the same 1200 plant.

And hit.

Execute.

You should see that there are some materials that have cumulative requirements transferred to MRP.

And probably if you look at this material, the material would be planned on a daily basis as opposed

to individual basis.

Now if you come to s four Hana.

The same table.

VB exists.

And it transfers requirements at a sales document level C M0 to sales order number, line item, schedule

line, and the same details like plant area.

When it is required by all that stuff is there in the table.

But if you go to VBS.

There are no entries there.

If at all, there were entries that could be because this table could be generated as a dynamic view

and we would know it from the proxy object.

Right.

So if you go to N C11.

VBS.

Go to display.

Go to extras.

Proxy object.

It doesn't have a proxy object.

That means data is actually not being pulled into this table at all.

It might probably be there for legacy reasons, so it does not have.

Data entered into it at runtime as a collective requirement.

So in terms of migration, if you are migrating from ECC to S four Hana, here is what you have to do.

We go to AUVs to.

There might be entries or there will probably be entries that have be.

For the availability check.

So make sure that all entries where there is a B needs to be removed.

And it needs to be set to.

Be and it needs to be set to a.

So migratory step.

In two.

Availability check.

Config.

Or rather transfer of requirements config.

This is one of it.

There is another one where the scope of check is done, but we're not talking about that.

Ensure.

Collective requirements.

Is removed.

So any availability check type that has collective requirements.

Needs to be removed.

So just to summarize.

The availability check field in the three view controls two things ATP tour transfer requirements.

And how do these requirements get transferred to?

Couple of ways daily requirements and individual requirements.

We have seen examples of individual requirements business case for that we have seen example for daily

requirements.

But this is something every consultant would understand.

Come.

As for Hannah and these are stored in these tables.

If you go to VB, this stores the individual requirements.

We have seen some examples of them.

And the VBS table.

Stirs the collective requirements.

Now, there is no need for collective requirements as a separate table in Hana because this aggregation.

It's essentially an aggregation, right?

There are 100 records created on 1st January 2017.

This aggregation of individual orders by date can happen on the fly.

So in s four Hana, this collective requirement table is removed, meaning there's no there's no point

in using that table.

Records don't get stored there.

It could exist for historic reasons, but it doesn't get stored there.

So as a migratory step, all you have to do is go to to the availability, check config and ensure that

any availability check config with B which is collected requirements should be removed.

That's it.

So functionally, there are no changes.

Behind the scenes as part of migration.

All you have to do is.

Remove a certain piece of configuration if it exists.

And understand that requirements are no longer transferred and stored separately as collective requirements.