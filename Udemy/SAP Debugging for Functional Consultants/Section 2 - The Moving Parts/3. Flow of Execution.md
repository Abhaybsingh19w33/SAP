# Flow of Execution

## Introduction
The provided text explains the flow of execution in an SAP program, specifically focusing on the sales order program. It describes how a program's flow happens sequentially, step by step, with multiple blocks of code.

## Program Structure

### Blocks of Code
- A program contains multiple blocks of code.
- Each block can contain one or more smaller blocks of code.
- Example: In the sales order program, there are blocks like `include MV45AZ`.

### Statements within Blocks
- Each block of code contains statements.
- Statements can include:
  - Conditional logic (e.g., `if` statements)
  - Data fetching commands
  - Comparison logic (e.g., less than, greater than, equal to)

### Execution Sequence
- Blocks of code are executed in the order they are written.
- Within each block, statements are executed sequentially.

## Debugging Approach

### Setting Breakpoints
- A breakpoint can be set at a specific line of code to pause the program's execution.
- If the breakpoint is not hit, it indicates that the program's execution did not reach that point.

### Understanding Output Determination Procedure
- Each output type is associated with a routine that checks certain requirements to determine if an output should be triggered.
- By navigating to the output determination procedure and examining the associated routine, a breakpoint can be set to catch the program's execution when it reaches that routine.

### Using the Debugger
- Once the breakpoint is hit, the debugger starts, allowing the user to step through the code line by line.
- The debugger shows the current line of code being executed and allows the user to move to the next line, observing the program's behavior at each step.

## Importance of Functional Knowledge
- Functional knowledge is crucial for effective debugging.
- While an ABAP consultant can help understand the code, a functional consultant's understanding of the system's logic is invaluable.

## Windows of Code
- Various windows of code can affect the program's functionality, such as:
  - Routines
  - User exits
  - BAdIs (Business Add-Ins)
  - Business transaction events (BTEs)

## Conclusion
- A systematic approach to debugging in SAP is essential.
- Understanding the program flow, setting breakpoints, and leveraging functional knowledge are key to identifying and resolving issues.
- Functional consultants should have a basic understanding of ABAP to effectively debug and identify low-hanging fruit in the code.

---

## Detailed Example

### Step-by-Step Execution

1. **Open the Sales Order Program**
   - Contains multiple blocks of code.
   - Example: `include MV45AZ`.

2. **Examine Blocks of Code**
   - Each block can contain more blocks.
   - Each block contains statements (e.g., logic, data fetching, comparison).

3. **Set a Breakpoint**
   - Example: Set a breakpoint in the output routine.
   - If the breakpoint is not hit, the program's execution did not reach that point.

4. **Navigate to Output Determination Procedure**
   - Path: `SPRO > IMG > Sales and Distribution > Basic Functions > Output Control > Output Determination > Output determination using condition technique > Maintain output for sales documents`.
   - Select output type: `BA00`.
   - Click on `Processing Routines`.
   - Identify the program for print output.
   - Set a breakpoint in the program.

5. **Execute the Program Again**
   - Navigate to `VA02` (change mode).
   - Enter the last created sales order number.
   - Go to `Extras > Output > Header > Edit`.
   - Check if the output is determined.

6. **Analyze Results**
   - If the breakpoint is hit, the debugger starts.
   - Step through the code line by line to identify where the program's logic fails.

## Summary
- **Code Flow**: SAP executes code block by block, line by line.
- **Standard Code**: Programs written by SAP and delivered as part of the ERP package.
- **Windows of Code**: Specific pockets for customization (e.g., routines, user exits, BAdIs, BTEs).
- **Debugging**: Functional consultants should understand debugging basics to identify issues effectively.


The provided text explains the flow of execution in an SAP program, specifically focusing on the sales order program. It begins by describing how a program's flow happens sequentially, step by step, with multiple blocks of code. Each block can contain one or more smaller blocks of code. For example, in the sales order program, there are blocks like include MV45AZ, which can be double-clicked to open and reveal more blocks of code within.

Each block of code contains statements, which can include logic such as conditional statements (e.g., if statements), data fetching commands, and comparison logic. These statements execute in the order they are written. For instance, the first block of code is executed first, followed by the second block, and so on. Within each block, the statements are executed sequentially.

When debugging, a breakpoint can be set at a specific line of code to pause the program's execution at that point. If the breakpoint is not hit, it indicates that the program's execution did not reach that point, meaning the issue lies somewhere before the breakpoint. Understanding where the program's execution stops is crucial for effective debugging.

The text then explains the importance of understanding the output determination procedure in SAP. Each output type is associated with a routine that checks certain requirements to determine if an output should be triggered. By navigating to the output determination procedure and examining the associated routine, a breakpoint can be set to catch the program's execution when it reaches that routine.

Once the breakpoint is hit, the debugger starts, allowing the user to step through the code line by line. This process helps identify where the program's logic fails. The debugger shows the current line of code being executed and allows the user to move to the next line, observing the program's behavior at each step.

The text emphasizes the importance of functional knowledge in debugging. While an ABAP consultant can help understand the code, a functional consultant's understanding of the system's logic is invaluable. The text also mentions various windows of code, such as routines, user exits, BAdIs (Business Add-Ins), and business transaction events (BTEs), where custom code can affect the program's functionality.

In conclusion, the text highlights the need for a systematic approach to debugging in SAP. Understanding the program flow, setting breakpoints, and leveraging functional knowledge are essential for identifying and resolving issues. The text also suggests that functional consultants should have a basic understanding of ABAP to effectively debug and identify low-hanging fruit in the code.



You see the flow of a program happens sequentially step by step.

So if you open the sales order program, it will contain multiple blocks.

These are blocks.

Or blocks of code.

Each block could again contain one or more blocks of code.

Let me show this to you.

If you go open the sales order program.

These are the blocks that I was talking about.

So include MV 40 5AZ.

That's a block of code.

You can double click it and the system will open that little block of code.

And that could in turn contain different blocks.

So this is a block of code.

This could in turn contain more blocks.

So and each block of code, for example, if we are talking about this block of code, each block of

code could contain one or more statements.

So these are all statements.

So what is a statement?

A statement could contain logic.

Like if.

Logic.

If something, then do something.

So if the customer is so-and-so, then do this.

If the material is zero one, do this.

If the material group is something else, do this, so on and so forth.

And then there could be logic to fetch data.

Okay.

When you enter a material zero one, fetch the data for M01.

When you enter a customer 6790, fetch the data for that customer like name address and put it in the

sales order.

Right?

And then you have comparison logic less than greater than equal to this.

So the soul two is equal to this or sold to customers.

Group is equal to this, then do this logic.

So you got different kinds of statements that each do a certain set of logic.

And now when you look at these blocks, they go in sequence.

The sequence in which they are written.

Meaning this is the first block of code and this is the second block of code.

The first block of code is executed first and then the second block of code.

And inside the second block of code, they go in this order.

So this will be executed first.

And this will be executed next.

And then this, because that's the way in which they have been written.

When you put a break point somewhere over here, let's say we have put a break point here.

So this is the output routine, say so when I mean output routine, this is the one I was talking about.

We have put a break point here.

Right.

And when I try to execute that sales order again and try to issue an output, the output was not issued.

That means even though you put a break point here, the system did not come up to this point.

To be able to execute that code.

That means somewhere before this routine is being triggered.

The program's execution has stopped.

But where did it stop?

Again.

Even an Abap consultant cannot help you with this because it's like tons and tons of code over here.

Now what do we do?

Again, your knowledge of the system as a function consultant is going to help you here.

Now we know that every output.

Is associated with a routine.

What is this routine do?

This routine will check for certain requirements and the requirements are okay.

It will let SAP run the output control program.

And if not, it will stop it right there.

So let's open this routine that's associated with the output type bar zero zero and see if we can put

a breakpoint there and stop the execution of the program.

Now, how do we do that?

Again, you have to go to Sbarro.

The same path that we have gone through previously, sales and distribution.

Basic functions.

Output control.

So we go to an output determination procedure.

For orders.

Click on control data and for B00.

The routine that's associated with it is to.

So what does to do here?

Click on the dropdown.

Select two and click on the source code.

Okay.

So this is a program that's being executed to determine if an output should be triggered or not.

Okay.

Now you can put a breakpoint here somewhere.

Let's say.

Put a breakpoint here.

And.

Try to execute the sales order program again.

So go to var zero two.

Enter.

Go to extras.

Output.

Header.

Edit.

And there you go.

Your debugger has started.

That means that we have hit that point where we think that SAP is going to stop.

What is being done here Now, this is called the debugger.

We have seen this in the previous chapter a little bit, but we're going to explore a little bit more

here.

This is where we have put a breakpoint and the system has stopped there.

Again, I don't understand this code either, but we're going to go through this step by step.

This is a form.

From Kobe if 002, a form is basically a chunk of program which has got basically ten, 20, 30, 100

lines.

It's a small section of the code and it has these statements, like I said.

One statement.

Two statement.

Three statement, four statement.

Five statement.

Statements.

Each line basically is a statement.

And there are different kinds of statements.

There is an if statement.

And then there are competitors which says this is equal to four.

That is equal to two.

So many different kinds of statements here.

Now, we can go through these statements step by step.

Now remember the golf program?

My entire swing was frozen, put on video and then they could pause my swing at any point in time and

then go through step by step, meaning millisecond by millisecond.

Same thing here.

Currently, the code is frozen here.

Now if you want to move to the next step.

Which is this?

You could do something like this, which is you have to hit this button, execute F6 and then this arrow

over here, which points out to the place where we are currently frozen or paused and then move to the

next step.

You watch this arrow and when I hit this button.

It will go to the next line from 34 on to 35.

Here there is an if statement that is evaluating something and then doing something else.

Then it says com cbve one.

You all again.

I don't know what that is.

Okay.

We're going to find out about this in the next chapter.

So it says if something not equal to C, then exit.

Right.

So let's see if that is equal to C or not equal to C, It's just a plain comparison.

So again, click on this button and then it goes into the loop.

That means it is not equal to C.

And go to the next step And.

It says exit.

That means we are done here.

This output routine is no longer going to execute.

And how do you know that?

You see, this is the program, right?

002.

That's the routine.

Now, if I hit execute again.

It's still in the program, zero zero to execute again.

And then it's got out of that program.

So what has happened here?

So be A00.

Is associated with routine 002.

And if this routine is passed, meaning if it is successful, then it calls the output program.

But if it fails, it goes to something else.

We don't care what it does.

Because of certain condition.

This has failed and it exited the program and it's gone over to do something else.

Now, at this point, you have two options.

Option one.

So ask your Abap consultant to come help you understand that program because you don't understand coding.

So Abap Consultant.

Is the first option.

The second option is you could try and go one step further.

And understand where what kind of business logic has failed.

Go further.

To see.

Where the logic failed.

If you have gone this far, I think you have done a pretty good job of debugging.

It's okay.

It's not bad.

But this is a very simple example.

Not all examples are this easy.

We were able to quickly narrow it down to a particular piece of code because we know the logic of how

SAP works behind the scenes in terms of outputs.

Sometimes that is not the case.

There are multiple windows of code where things could go wrong.

And the different windows of code could be routines.

User exits.

Bodies.

BT's business transaction events.

These are some of the standard SAP windows of code where you could have written some code to affect

your functionality.

The example that we have seen is a routine, an output requirement routine.

Similarly, there could be user exits that could affect the way your program works.

There could be bodies or there could be bodies.

Sometimes you might not be able to narrow it down exactly to the point where your code is failing.

If there is more than one window of code where things could fail, then it's not easy for an Abap consultant

to debug all the different windows of code.

So in cases like this, it would be better if, as a function consultant, we understand debugging a

little bit, at least go through a little pieces of code.

And be able to quickly identify certain things that are really easy.

Now, we are not trying to learn about coding here, but we are just trying to see what's the low hanging

fruit.

Try to hit it and make our life easy.

Now, in order to do that, we have to understand some basics of Abap.

Now I'm going to teach you Abap here, Thank God.

But we're going to learn certain things like structures, internal tables, loops, if statements,

probably that's about it.

So in the next set of chapters, we'll deal with a bunch of technical stuff.

So these details are really necessary if you want to see and understand some business examples.

So let's summarize what we have learned here.

We have learned.

Code flow.

Which is the way SAP goes through code and executes them block by block, line by line.

We have seen what standard code is.

Which are programs written by SAP and delivered as part of the ERP package.

And we have seen that debugging them is not something a function consultant would ever attempt to do.

And we have also seen windows of code.

Which are specific pockets that provides.

For us to be able to customize the way SAP works.

And we have seen examples of these like view routines.

User exits.

Bodies.

Business.

Athens or Bbts.

Business transaction events.

Most of the time as a function consultant, if you are debugging something, you'll be in one of these

windows of code.

All right.

See you in the next chapter.