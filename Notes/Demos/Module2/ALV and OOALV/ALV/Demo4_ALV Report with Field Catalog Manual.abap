REPORT Z.
TABLES : SPFLI.
TYPE-POOLS SLIS .
TYPES : BEGIN OF TY_SPFLI,  "User defined internal table type
          CARRID    TYPE SPFLI-CARRID,
          CONNID    TYPE SPFLI-CONNID,
          COUNTRYFR TYPE SPFLI-COUNTRYFR,
          CITYFROM  TYPE SPFLI-CITYFROM,
        END OF TY_SPFLI.

DATA IT_SPFLI TYPE TABLE OF TY_SPFLI .
DATA WA_SPFLI TYPE TY_SPFLI .

DATA IT_FCAT TYPE SLIS_T_FIELDCAT_ALV .
DATA WA_FCAT TYPE SLIS_FIELDCAT_ALV.
SELECT-OPTIONS: S_CARRID FOR SPFLI-CARRID.

START-OF-SELECTION .
  PERFORM GET_DATA .
  PERFORM CREATE_FCAT.
  PERFORM DISP_ALV .

FORM GET_DATA .
  SELECT CARRID CONNID COUNTRYFR CITYFROM FROM SPFLI
      INTO TABLE IT_SPFLI
      WHERE CARRID IN S_CARRID.

ENDFORM.                    " GET_DATA

FORM DISP_ALV .
  CALL FUNCTION 'REUSE_ALV_GRID_DISPLAY'
    EXPORTING
      IT_FIELDCAT = IT_FCAT "PASS FIELD CATALOG TO ALV
    TABLES
      T_OUTTAB    = IT_SPFLI.
ENDFORM.                    " DISP_ALV

FORM CREATE_FCAT .
  WA_FCAT-COL_POS = '1' .
  WA_FCAT-FIELDNAME = 'CARRID' . "Field Name of the DB table
  WA_FCAT-SELTEXT_M = 'Airline' . "Col Heading to be displayed
  APPEND WA_FCAT TO IT_FCAT .
  CLEAR WA_FCAT .

  WA_FCAT-COL_POS = '2' .
  WA_FCAT-FIELDNAME = 'CONNID' .
  WA_FCAT-SELTEXT_M = 'Flight Number' .
  WA_FCAT-HOTSPOT = 'X' .
  APPEND WA_FCAT TO IT_FCAT .
  CLEAR WA_FCAT .

  WA_FCAT-COL_POS = '3' .
  WA_FCAT-FIELDNAME = 'COUNTRYFR' .
  WA_FCAT-NO_OUT = 'X' .
  WA_FCAT-SELTEXT_M = 'Country From' .
  WA_FCAT-EDIT = 'X' .
  APPEND WA_FCAT TO IT_FCAT .
  CLEAR WA_FCAT .

  WA_FCAT-COL_POS = '4' .
  WA_FCAT-FIELDNAME = 'CITYFROM' .
  WA_FCAT-TABNAME = 'IT_SPFLI' .
  WA_FCAT-SELTEXT_M = 'Departure City' .
  WA_FCAT-EMPHASIZE = 'C610'.
  APPEND WA_FCAT TO IT_FCAT .
  CLEAR WA_FCAT .

ENDFORM.                    " CREATE_FCAT