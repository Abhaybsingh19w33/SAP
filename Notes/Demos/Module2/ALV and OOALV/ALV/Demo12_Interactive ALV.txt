REPORT Z.

TYPES : BEGIN OF TY_SPFLI,  "User defined internal table type
          CARRID    TYPE SPFLI-CARRID,
          CONNID    TYPE SPFLI-CONNID,
          COUNTRYFR TYPE SPFLI-COUNTRYFR,
          CITYFROM  TYPE SPFLI-CITYFROM,
        END OF TY_SPFLI.

DATA : IT_SPFLI TYPE TABLE OF TY_SPFLI, "SPFLI internal table
       WA_SPFLI TYPE TY_SPFLI. "work area
DATA IT_FCAT_SPFLI TYPE SLIS_T_FIELDCAT_ALV. "field catalog for SPFLI table
DATA WA_FCAT_SPFLI LIKE LINE OF IT_FCAT_SPFLI.

DATA S_LAYOUT TYPE SLIS_LAYOUT_ALV.
S_LAYOUT-ZEBRA = 'X'.

PARAMETERS P_CARRID TYPE SPFLI-CARRID. "CARRID type input

START-OF-SELECTION.
  PERFORM GET_DATA_SPFLI.
  PERFORM CREATE_FCAT_SPFLI.
  PERFORM DISP_ALV_SPFLI.

FORM GET_DATA_SPFLI.
  SELECT CARRID CONNID COUNTRYFR CITYFROM FROM SPFLI
      INTO TABLE IT_SPFLI
    WHERE CARRID =  P_CARRID.
ENDFORM.                    " GET_DATA

FORM CREATE_FCAT_SPFLI .
  WA_FCAT_SPFLI-COL_POS = '1' .
  WA_FCAT_SPFLI-FIELDNAME = 'CARRID' . "Field Name of the DB table
  WA_FCAT_SPFLI-SELTEXT_M = 'Airline' . "Col Heading to be displayed
  WA_FCAT_SPFLI-HOTSPOT = 'X' .
  APPEND WA_FCAT_SPFLI TO IT_FCAT_SPFLI .
  CLEAR WA_FCAT_SPFLI .

  WA_FCAT_SPFLI-COL_POS = '2' .
  WA_FCAT_SPFLI-FIELDNAME = 'CONNID' .
  WA_FCAT_SPFLI-SELTEXT_M = 'Flight Number' .
  APPEND WA_FCAT_SPFLI TO IT_FCAT_SPFLI .
  CLEAR WA_FCAT_SPFLI .

  WA_FCAT_SPFLI-COL_POS = '3' .
  WA_FCAT_SPFLI-FIELDNAME = 'COUNTRYFR' .
  "WA_FCAT_SPFLI-NO_OUT = 'X' .
  WA_FCAT_SPFLI-SELTEXT_M = 'Country From' .
*  WA_FCAT_SPFLI-EDIT = 'X' .
  APPEND WA_FCAT_SPFLI TO IT_FCAT_SPFLI .
  CLEAR WA_FCAT_SPFLI .

  WA_FCAT_SPFLI-COL_POS = '4' .
  WA_FCAT_SPFLI-FIELDNAME = 'CITYFROM' .
  WA_FCAT_SPFLI-SELTEXT_M = 'Departure City' .
  WA_FCAT_SPFLI-EMPHASIZE = 'C610'.
  APPEND WA_FCAT_SPFLI TO IT_FCAT_SPFLI .
  CLEAR WA_FCAT_SPFLI .

ENDFORM.                    " CREATE_FCAT


FORM DISP_ALV_SPFLI .
  CALL FUNCTION 'REUSE_ALV_GRID_DISPLAY'
    EXPORTING
      I_CALLBACK_PROGRAM      = SY-REPID "mandatory for event handling
      I_CALLBACK_USER_COMMAND = 'SUBINTER'
      IT_FIELDCAT             = IT_FCAT_SPFLI "PASS FIELD CATALOG TO ALV
    TABLES
      T_OUTTAB                = IT_SPFLI.
ENDFORM.                    " DISP_ALV

FORM SUBINTER USING R_UCOMM LIKE SY-UCOMM RS_SELFIELD TYPE SLIS_SELFIELD.
  CASE R_UCOMM.
    WHEN '&IC1'. "standard Function code for double click
      READ TABLE IT_SPFLI INTO WA_SPFLI INDEX RS_SELFIELD-TABINDEX.
      IF SY-SUBRC = 0.
        SET PARAMETER ID 'CARID' FIELD WA_SPFLI-CARRID. "set parameter id
        CALL TRANSACTION 'Z104329TC1' .
      ENDIF.
  ENDCASE.
ENDFORM.